import{_ as A,k as B,h as L,r as c,m as V,o as E,p as R,a as d,b as g,c as $,d as s,e as a,q as o,j as u,t as l,n as F,A as H,B as Y,l as z,v as U,x as j}from"./index-a19affa2.js";import{u as O}from"./dataAppointment-4893227b.js";import{d as q}from"./day-a01efc22.js";const n=m=>(U("data-v-11cd4990"),m=m(),j(),m),K={class:"grid"},G={class:"col-12"},J={class:"card"},Q={class:"my-2"},W={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},X=n(()=>s("h5",{class:"m-0"},"Citas Médicas",-1)),Z={class:"block mt-2 md:mt-0 p-input-icon-left"},ee=n(()=>s("i",{class:"pi pi-search"},null,-1)),te=n(()=>s("span",{class:"p-column-title"},"Nº",-1)),se=n(()=>s("span",{class:"p-column-title"},"Paciente",-1)),ae=n(()=>s("span",{class:"p-column-title"},"Estado",-1)),oe=n(()=>s("span",{class:"p-column-title"},"Médico",-1)),ne=n(()=>s("span",{class:"p-column-title"},"Especialidad",-1)),le=n(()=>s("span",{class:"p-column-title"},"Fecha Consulta",-1)),ie=n(()=>s("h6",null,"Motivo de la consulta:",-1)),de=n(()=>s("h6",null,"Diágnostico:",-1)),re=n(()=>s("h6",null,"Tratamiento:",-1)),ce={__name:"Tracking",setup(m){const w=B(),y=L(),S=O(),p=c([]),_=c(null),f=c(null),h=c({}),v=c(null);V(()=>{x()});const k=()=>{f.value.exportCSV()},T=()=>{w.push("/listdoctor")},C=e=>{console.log(e),_.value=e,v.value=!0};E(async()=>{await S.getAppointmentUserId(y.user.user.userId).then(e=>p.value=e),p.value.forEach(e=>{e.nameDoctor=`${e.doctor.user.surnames} ${e.doctor.user.name}`,e.dependent?e.patient=`${e.dependent.name} ${e.dependent.surnames}`:e.patient=`${e.user.name} ${e.user.surnames}`,e.appointmentHistories.length>=1&&(console.log(e.appointmentHistories),e.reason=e.appointmentHistories[0].reason,e.treatment=e.appointmentHistories[0].treatment,e.diagnosis=e.appointmentHistories[0].diagnosis)}),console.log(p.value)});const x=()=>{h.value={global:{value:null,matchMode:R.CONTAINS}}};return(e,r)=>{const M=d("Toast"),b=d("Button"),D=d("Toolbar"),I=d("InputText"),i=d("Column"),P=d("DataTable"),N=d("Dialog");return g(),$("div",K,[s("div",G,[s("div",J,[a(M),a(D,{class:"mb-4"},{start:o(()=>[s("div",Q,[a(b,{label:"Agendar Cita Médica",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:T})])]),end:o(()=>[a(b,{label:"Exportar",icon:"pi pi-upload",class:"p-button-help",onClick:r[0]||(r[0]=t=>k(t))})]),_:1}),a(P,{ref_key:"dt",ref:f,value:p.value,dataKey:"appointmentId",paginator:!0,rows:10,filters:h.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Mostrando del  {first} al {last} de {totalRecords} Atenciones",responsiveLayout:"scroll"},{header:o(()=>[s("div",W,[X,s("span",Z,[ee,a(I,{modelValue:h.value.global.value,"onUpdate:modelValue":r[1]||(r[1]=t=>h.value.global.value=t),placeholder:"Buscar..."},null,8,["modelValue"])])])]),default:o(()=>[a(i,{field:"timeSlot.nTurn",header:"Nº",sortable:!0,headerStyle:"width:5%; min-width:2rem;"},{body:o(t=>[te,u(" "+l(t.data.timeSlot.nTurn),1)]),_:1}),a(i,{field:"patient",header:"Paciente",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:o(t=>[se,u(" "+l(t.data.patient),1)]),_:1}),a(i,{field:"status",header:"Estado",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:o(t=>[ae,s("span",{class:F("user-badge status-"+(t.data.status?t.data.status.toLowerCase():""))},l(t.data.status),3)]),_:1}),a(i,{field:"nameDoctor",header:"Médico",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:o(t=>[oe,u(" "+l(t.data.nameDoctor),1)]),_:1}),a(i,{field:"doctor.specialization",header:"Especialidad",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:o(t=>[ne,u(" "+l(t.data.doctor.specialization),1)]),_:1}),a(i,{field:"timeSlot.orderlyTurn",header:"Fecha Consulta",sortable:!0,headerStyle:"width:15%; min-width:10rem;"},{body:o(t=>[le,u(" "+l(H(q)(t.data.timeSlot.orderlyTurn,"DD MMMM YYYY hh:mm a")),1)]),_:1}),a(i,{headerStyle:"width:10%; min-width:5rem;",header:"Resultados"},{body:o(t=>[t.data.status=="atendido"?(g(),Y(b,{key:0,icon:"pi pi-eye",class:"p-button-rounded p-button-success mt-2",onClick:ue=>C(t.data)},null,8,["onClick"])):z("",!0)]),_:1})]),_:1},8,["value","filters"]),a(N,{visible:v.value,"onUpdate:visible":r[2]||(r[2]=t=>v.value=t),modal:"",header:"Información de la consulta",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:o(()=>[ie,s("p",null,l(_.value.reason),1),de,s("p",null,l(_.value.diagnosis),1),re,s("p",null,l(_.value.treatment),1)]),_:1},8,["visible"])])])])}}},he=A(ce,[["__scopeId","data-v-11cd4990"]]);export{he as default};
