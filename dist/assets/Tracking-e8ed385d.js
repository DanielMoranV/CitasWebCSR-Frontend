import{_ as $,p as E,j as R,r as u,q as F,o as z,s as H,a as d,b as g,d as j,e,l as s,v as o,m,t as n,n as U,C as y,f as O,h as q,y as K,z as G}from"./index-4af1a839.js";import{u as J}from"./dataAppointment-6c01be46.js";import{d as w}from"./day-a01efc22.js";const l=p=>(K("data-v-2f2f7515"),p=p(),G(),p),Q={class:"grid"},W={class:"col-12"},X={class:"card"},Z={class:"my-2"},ee={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},te=l(()=>e("h5",{class:"m-0"},"Citas Médicas",-1)),ae={class:"block mt-2 md:mt-0 p-input-icon-left"},se=l(()=>e("i",{class:"pi pi-search"},null,-1)),oe=l(()=>e("span",{class:"p-column-title"},"Nº",-1)),ne=l(()=>e("span",{class:"p-column-title"},"Paciente",-1)),le=l(()=>e("span",{class:"p-column-title"},"Estado",-1)),ie=l(()=>e("span",{class:"p-column-title"},"Médico",-1)),re=l(()=>e("span",{class:"p-column-title"},"Especialidad",-1)),de=l(()=>e("span",{class:"p-column-title"},"Fecha Consulta",-1)),ce={class:"inline-flex align-items-center justify-content-center gap-2"},ue=l(()=>e("h4",{class:"font-bold white-space-nowrap"},"Detalle de consulta Médica",-1)),me=l(()=>e("h6",null,"Motivo de la consulta:",-1)),pe=l(()=>e("h6",null,"Diagnóstico:",-1)),_e=l(()=>e("h6",null,"Tratamiento:",-1)),he={__name:"Tracking",setup(p){const C=E(),k=R(),S=J(),v=u([]),i=u(null),b=u(null),_=u({}),f=u(null);F(()=>{D()});const M=()=>{b.value.exportCSV()},T=()=>{C.push("/listdoctor")},x=a=>{i.value=a,f.value=!0};z(async()=>{await S.getAppointmentUserId(k.user.user.userId).then(a=>v.value=a),v.value.forEach(a=>{a.nameDoctor=`${a.doctor.user.surnames} ${a.doctor.user.name}`,a.dependent?a.patient=`${a.dependent.name} ${a.dependent.surnames}`:a.patient=`${a.user.name} ${a.user.surnames}`,a.appointmentHistories.length>=1&&(a.reason=a.appointmentHistories[0].reason,a.treatment=a.appointmentHistories[0].treatment,a.diagnosis=a.appointmentHistories[0].diagnosis)})});const D=()=>{_.value={global:{value:null,matchMode:H.CONTAINS}}},P=u(null),I=()=>{window.print()};return(a,r)=>{const A=d("Toast"),h=d("Button"),N=d("Toolbar"),L=d("InputText"),c=d("Column"),V=d("DataTable"),B=d("Avatar"),Y=d("Dialog");return g(),j("div",Q,[e("div",W,[e("div",X,[s(A),s(N,{class:"mb-4"},{start:o(()=>[e("div",Z,[s(h,{label:"Agendar Cita Médica",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:T})])]),end:o(()=>[s(h,{label:"Exportar",icon:"pi pi-upload",class:"p-button-help",onClick:r[0]||(r[0]=t=>M(t))})]),_:1}),s(V,{ref_key:"dt",ref:b,value:v.value,dataKey:"appointmentId",paginator:!0,rows:10,filters:_.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Mostrando del  {first} al {last} de {totalRecords} Atenciones",responsiveLayout:"scroll"},{header:o(()=>[e("div",ee,[te,e("span",ae,[se,s(L,{modelValue:_.value.global.value,"onUpdate:modelValue":r[1]||(r[1]=t=>_.value.global.value=t),placeholder:"Buscar..."},null,8,["modelValue"])])])]),default:o(()=>[s(c,{field:"timeSlot.nTurn",header:"Nº",sortable:!0,headerStyle:"width:5%; min-width:2rem;"},{body:o(t=>[oe,m(" "+n(t.data.timeSlot.nTurn),1)]),_:1}),s(c,{field:"patient",header:"Paciente",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:o(t=>[ne,m(" "+n(t.data.patient),1)]),_:1}),s(c,{field:"status",header:"Estado",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:o(t=>[le,e("span",{class:U("user-badge status-"+(t.data.status?t.data.status.toLowerCase():""))},n(t.data.status),3)]),_:1}),s(c,{field:"nameDoctor",header:"Médico",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:o(t=>[ie,m(" "+n(t.data.nameDoctor),1)]),_:1}),s(c,{field:"doctor.specialization",header:"Especialidad",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:o(t=>[re,m(" "+n(t.data.doctor.specialization),1)]),_:1}),s(c,{field:"timeSlot.orderlyTurn",header:"Fecha Consulta",sortable:!0,headerStyle:"width:15%; min-width:10rem;"},{body:o(t=>[de,m(" "+n(y(w)(t.data.timeSlot.orderlyTurn,"DD MMMM YYYY hh:mm a")),1)]),_:1}),s(c,{headerStyle:"width:10%; min-width:5rem;",header:"Resultados"},{body:o(t=>[t.data.status=="atendido"?(g(),O(h,{key:0,icon:"pi pi-eye",class:"p-button-rounded p-button-success mt-2",onClick:ve=>x(t.data)},null,8,["onClick"])):q("",!0)]),_:1})]),_:1},8,["value","filters"]),s(Y,{visible:f.value,"onUpdate:visible":r[3]||(r[3]=t=>f.value=t),modal:"",header:"Header",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:o(()=>[e("div",ce,[s(B,{image:"/layout/images/logo-dark.svg",class:"custom-avatar-size"})])]),default:o(()=>[ue,e("div",{ref_key:"dialogContent",ref:P},[e("h6",null,"Paciente: "+n(i.value.user.name+" "+i.value.user.surnames),1),e("h6",null,"Médico: "+n(i.value.nameDoctor),1),me,e("p",null,n(i.value.reason),1),pe,e("p",null,n(i.value.diagnosis),1),_e,e("p",null,n(i.value.treatment),1),e("h6",null,"Fecha: "+n(y(w)(i.value.timeSlot.orderlyTurn,"DD MMMM YYYY hh:mm a")),1)],512),s(h,{icon:"pi pi-print",class:"p-button-rounded p-button-success mt-4",onClick:r[2]||(r[2]=t=>I())})]),_:1},8,["visible"])])])])}}},ye=$(he,[["__scopeId","data-v-2f2f7515"]]);export{ye as default};
