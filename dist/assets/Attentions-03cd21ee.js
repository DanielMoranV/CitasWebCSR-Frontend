import{_ as z,k as B,u as E,h as R,y as O,r as l,m as U,w as j,o as q,p as b,D as G,a as d,b as H,c as K,d as s,e as o,q as a,t as r,A as _,j as c,n as J,C as Q,v as W,x as X}from"./index-ec84c2a8.js";import{u as Z}from"./dataAppointment-fdebec4e.js";import{u as ee}from"./dataUser-69dfe82f.js";import{d as w}from"./day-a01efc22.js";const u=h=>(W("data-v-0b34b852"),h=h(),X(),h),te={class:"grid"},oe={class:"col-12"},ae={class:"card"},se={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ne={class:"m-0"},re={class:"block mt-2 md:mt-0 p-input-icon-left"},le=u(()=>s("i",{class:"pi pi-search"},null,-1)),de=u(()=>s("span",{class:"p-column-title"},"Nº Turno",-1)),ie=u(()=>s("span",{class:"p-column-title"},"Paciente",-1)),ce=u(()=>s("span",{class:"p-column-title"},"Estado",-1)),ue=u(()=>s("span",{class:"p-column-title"},"Origen",-1)),me=u(()=>s("span",{class:"p-column-title"},"Fecha Consulta",-1)),pe={__name:"Attentions",setup(h){const S=B();E();const m=R();ee();const T=O(),A=Z(),C=l([]),f=l([]),g=l(null),p=l({}),v=l(null),M=l(null),x=l(!0);U(()=>P());const I=()=>g.value.exportCSV();j(M,e=>{console.log(e),e!=null&&(x.value=!1)}),q(async()=>{await T.getDoctors().then(e=>{C.value=e.map(n=>(n.name=`${n.user.surnames} ${n.user.name}`,n))}),console.log(m.user.user.Doctor.doctorId),f.value=await A.getAppointmentDoctorId(m.user.user.Doctor.doctorId),V(),v.value=!1});const P=()=>{p.value={global:{value:null,matchMode:b.CONTAINS},nameDoctor:{value:null,matchMode:b.IN},orderlyTurn:{operator:G.AND,constraints:[{value:null,matchMode:b.DATE_IS}]}}},k=e=>{console.log(e),Q.setItem("appointment",e),S.push("/patientcare")};function V(){f.value.forEach(e=>{e.orderlyTurn=new Date(e.orderlyTurn),e.specialization=e.Schedule.doctor.specialization,e.nameDoctor=`${e.Schedule.doctor.user.surnames} ${e.Schedule.doctor.user.name}`,e.price=e.Schedule.doctor.personalizedPrices[0].personalizedPrice,e.Appointment[0]&&(e.status=e.Appointment[0].status,e.origin=e.Appointment[0].origin,e.appointmentId=e.Appointment[0].appointmentId,e.Appointment[0].dependent?e.patient=`${e.Appointment[0].dependent.name} ${e.Appointment[0].dependent.surnames}`:e.patient=`${e.Appointment[0].user.name} ${e.Appointment[0].user.surnames}`)})}return(e,n)=>{const L=d("Toast"),y=d("Button"),N=d("Toolbar"),F=d("InputText"),i=d("Column"),$=d("Calendar"),Y=d("DataTable");return H(),K("div",te,[s("div",oe,[s("div",ae,[o(L),o(N,{class:"mb-4"},{start:a(()=>[s("h6",null,r(_(m).user.user.surnames)+" "+r(_(m).user.user.name)+" | "+r(_(m).user.user.Doctor.specialization),1)]),end:a(()=>[o(y,{label:"Exportar",icon:"pi pi-upload",class:"p-button-help",onClick:n[0]||(n[0]=t=>I(t))})]),_:1}),o(Y,{ref_key:"dt",ref:g,value:f.value,dataKey:"timeSlotId",paginator:!0,rows:10,rowHover:!0,filters:p.value,"onUpdate:filters":n[2]||(n[2]=t=>p.value=t),filterDisplay:"menu",loading:v.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Mostrando del  {first} al {last} de {totalRecords} Atenciones",globalFilterFields:["nTurn","patient","status","nameDoctor","status","specialization","orderlyTurn","origin"],responsiveLayout:"scroll",showGridlines:""},{header:a(()=>[s("div",se,[s("h5",ne,"Lista de pacientes "+r(_(w)(new Date,"DD MMMM YYYY")),1),s("span",re,[le,o(F,{modelValue:p.value.global.value,"onUpdate:modelValue":n[1]||(n[1]=t=>p.value.global.value=t),placeholder:"Buscar..."},null,8,["modelValue"])])])]),empty:a(()=>[c("No se encontraron citas médicas ")]),loading:a(()=>[c(" Cargando datos. Espere por favor. ")]),default:a(()=>[o(i,{field:"nTurn",header:"Nº Turno",sortable:!0,headerStyle:"width:10%; min-width:2rem;"},{body:a(t=>[de,c(" "+r(t.data.nTurn),1)]),_:1}),o(i,{field:"patient",header:"Paciente",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:a(t=>[ie,c(" "+r(t.data.patient),1)]),_:1}),o(i,{field:"status",header:"Estado",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:a(t=>[ce,s("span",{class:J("user-badge status-"+(t.data.status?t.data.status.toLowerCase():""))},r(t.data.status||"Disponible"),3)]),_:1}),o(i,{field:"origin",header:"Origen",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:a(t=>[ue,c(" "+r(t.data.origin),1)]),_:1}),o(i,{field:"orderlyTurn",header:"Fecha Consulta",showFilterMatchModes:!1,sortable:!0,headerStyle:"width:15%; min-width:10rem;"},{body:a(t=>[me,c(" "+r(_(w)(t.data.orderlyTurn,"DD MMMM YYYY hh:mm a")),1)]),filter:a(({filterModel:t})=>[o($,{modelValue:t.value,"onUpdate:modelValue":D=>t.value=D,dateFormat:"dd/mm/yy",placeholder:"dd/mm/yyyy"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(i,{headerStyle:"width:10%; min-width:5rem;",header:"Acciones"},{body:a(t=>[o(y,{icon:"pi pi-list",class:"p-button-rounded p-button-success mt-2",onClick:D=>k(t.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters","loading"])])])])}}},ge=z(pe,[["__scopeId","data-v-0b34b852"]]);export{ge as default};
