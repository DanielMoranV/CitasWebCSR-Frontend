import{_ as V,m as z,u as Y,i as E,z as R,r as l,p as O,w as U,o as H,q as g,D as j,a as d,b as D,c as q,d as a,k as n,s as o,t as r,B as m,l as c,n as G,e as K,f as J,x as Q,y as W}from"./index-7e3665c5.js";import{u as X}from"./dataAppointment-36412409.js";import{u as Z}from"./dataUser-20fc8260.js";import{d as S}from"./day-a01efc22.js";const u=_=>(Q("data-v-cce1429c"),_=_(),W(),_),ee={class:"grid"},te={class:"col-12"},ae={class:"card"},oe={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},se={class:"m-0"},ne={class:"block mt-2 md:mt-0 p-input-icon-left"},re=u(()=>a("i",{class:"pi pi-search"},null,-1)),le=u(()=>a("span",{class:"p-column-title"},"Nº Turno",-1)),ie=u(()=>a("span",{class:"p-column-title"},"Paciente",-1)),de=u(()=>a("span",{class:"p-column-title"},"Estado",-1)),ce=u(()=>a("span",{class:"p-column-title"},"Origen",-1)),ue=u(()=>a("span",{class:"p-column-title"},"Fecha Consulta",-1)),pe={__name:"Attentions",setup(_){const T=z();Y();const h=E();Z();const A=R(),v=X(),M=l([]),f=l([]),y=l(null),p=l({}),b=l(null),C=l(null),x=l(!0);O(()=>P());const k=()=>y.value.exportCSV();U(C,e=>{e!=null&&(x.value=!1)}),H(async()=>{await A.getDoctors().then(e=>{M.value=e.map(s=>(s.name=`${s.user.surnames} ${s.user.name}`,s))}),f.value=await v.getAppointmentDoctorId(h.user.user.Doctor.doctorId),N(),b.value=!1});const P=()=>{const e=new Date;e.setHours(0,0,0,0),p.value={global:{value:null,matchMode:g.CONTAINS},nameDoctor:{value:null,matchMode:g.IN},orderlyTurn:{operator:j.AND,constraints:[{value:e,matchMode:g.DATE_IS}]}}},I=e=>{v.$state.appointment=e,T.push("/patientcare")};function N(){f.value.forEach(e=>{e.orderlyTurn=new Date(e.orderlyTurn),e.specialization=e.Schedule.doctor.specialization,e.nameDoctor=`${e.Schedule.doctor.user.surnames} ${e.Schedule.doctor.user.name}`,e.price=e.Schedule.doctor.personalizedPrices[0].personalizedPrice,e.Appointment[0]&&(e.status=e.Appointment[0].status,e.origin=e.Appointment[0].origin,e.appointmentId=e.Appointment[0].appointmentId,e.Appointment[0].dependent?e.patient=`${e.Appointment[0].dependent.name} ${e.Appointment[0].dependent.surnames}`:e.patient=`${e.Appointment[0].user.name} ${e.Appointment[0].user.surnames}`)})}return(e,s)=>{const L=d("Toast"),w=d("Button"),$=d("Toolbar"),B=d("InputText"),i=d("Column"),F=d("DataTable");return D(),q("div",ee,[a("div",te,[a("div",ae,[n(L),n($,{class:"mb-4"},{start:o(()=>[a("h6",null,r(m(h).user.user.surnames)+" "+r(m(h).user.user.name)+" | "+r(m(h).user.user.Doctor.specialization),1)]),end:o(()=>[n(w,{label:"Exportar",icon:"pi pi-upload",class:"p-button-help",onClick:s[0]||(s[0]=t=>k(t))})]),_:1}),n(F,{ref_key:"dt",ref:y,value:f.value,dataKey:"timeSlotId",paginator:!0,rows:10,rowHover:!0,filters:p.value,"onUpdate:filters":s[2]||(s[2]=t=>p.value=t),filterDisplay:"menu",loading:b.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Mostrando del  {first} al {last} de {totalRecords} Atenciones",globalFilterFields:["nTurn","patient","status","nameDoctor","status","specialization","orderlyTurn","origin"],responsiveLayout:"scroll",showGridlines:""},{header:o(()=>[a("div",oe,[a("h5",se,"Lista de pacientes "+r(m(S)(new Date,"DD MMMM YYYY")),1),a("span",ne,[re,n(B,{modelValue:p.value.global.value,"onUpdate:modelValue":s[1]||(s[1]=t=>p.value.global.value=t),placeholder:"Buscar..."},null,8,["modelValue"])])])]),empty:o(()=>[c("No se encontraron citas médicas ")]),loading:o(()=>[c(" Cargando datos. Espere por favor. ")]),default:o(()=>[n(i,{field:"nTurn",header:"Nº Turno",sortable:!0,headerStyle:"width:10%; min-width:2rem;"},{body:o(t=>[le,c(" "+r(t.data.nTurn),1)]),_:1}),n(i,{field:"patient",header:"Paciente",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:o(t=>[ie,c(" "+r(t.data.patient),1)]),_:1}),n(i,{field:"status",header:"Estado",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:o(t=>[de,a("span",{class:G("user-badge status-"+(t.data.status?t.data.status.toLowerCase():""))},r(t.data.status||"Disponible"),3)]),_:1}),n(i,{field:"origin",header:"Origen",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:o(t=>[ce,c(" "+r(t.data.origin),1)]),_:1}),n(i,{field:"orderlyTurn",header:"Fecha Consulta",showFilterMatchModes:!1,sortable:!0,headerStyle:"width:15%; min-width:10rem;"},{body:o(t=>[ue,c(" "+r(m(S)(t.data.orderlyTurn,"DD MMMM YYYY hh:mm a")),1)]),_:1}),n(i,{headerStyle:"width:10%; min-width:5rem;",header:"Acciones"},{body:o(t=>[t.data.patient?(D(),K(w,{key:0,icon:"pi pi-list",class:"p-button-rounded p-button-success mt-2",onClick:me=>I(t.data)},null,8,["onClick"])):J("",!0)]),_:1})]),_:1},8,["value","filters","loading"])])])])}}},ve=V(pe,[["__scopeId","data-v-cce1429c"]]);export{ve as default};
