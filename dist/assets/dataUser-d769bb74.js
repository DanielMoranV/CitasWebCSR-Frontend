import{E as U,B as s,M as p,N as y,O as m,P as u,Q as f,R as o,S as D,T as w,U as P,V as i,W as I,X as z,Y as b,Z as F,$ as S}from"./index-16712e5a.js";const C=U("datauserStore",{state:()=>({dataUser:s.getItem("collaborator"),loadingDataUser:!1,dependents:s.getItem("dependents"),patients:s.getItem("patients"),msg:null}),actions:{async getCollaborators(){this.loadingDataUser=!0;try{const{data:e}=await p();return s.setItem("collaborator",e),this.dataUser=e,this.dataUser}catch(e){console.log(e)}finally{this.loadingDataUser=!1}},async getUsers(){this.loadingDataUser=!0;try{const{data:e}=await y();return this.dataUser=e,this.dataUser}catch(e){console.log(e)}finally{this.loadingDataUser=!1}},async getPatients(){this.loadingDataUser=!0;try{const{data:e}=await m();return s.setItem("patients",e),this.patients=e,this.patients}catch(e){console.log(e)}},async getUsersDependents(e){this.loadingDataUser=!0;try{const{data:a}=await u(e);return s.setItem("dependents",a.dependents),this.dependents=a.dependents,this.dependents}catch(a){console.log(a)}finally{this.loadingDataUser=!1}},async addUsersDependents(e){try{const{data:a}=await f(e);return a}catch(a){return console.log(a),a.message}},async updateUserDependents(e,a){try{const{data:t}=await o(e,a);this.dependents=this.dependents.map(r=>r.dependentId===e?{...r,...t}:r)}catch(t){console.log(t.message)}},async deleteUserDependents(e){try{await D(e),this.dataUser=this.dataUser.filter(a=>a.dni!==e)}catch(a){console.log(a.message)}finally{console.log("Finalizado")}},async addUsers(e){try{const{data:a}=await w(e);return await P(e.dni,{password:e.dni,roleId:4}),this.dataUser=a,a}catch(a){return this.msg=a.message,this.msg}finally{console.log("Finalizado")}},async updateUser(e,a,t,r,c){try{const{access:n,Doctor:l,...d}=c,{personalizedPrices:g,...h}=l;await o(e,d),await i(a,n),await I(t,h),await z(r,g[0])}catch(n){console.log(n.message)}},async disableUser(e){try{await i(e,{active:!1})}catch(a){console.log(a.message)}},async addPatients(e){try{const{data:a,message:t}=await b(e);this.dataUser=a,this.msg=t}catch(a){console.log(a),this.msg=a.message}},async profileUser(e){try{const{data:a}=await F(e);this.dataUser=a}catch(a){console.log(a.message)}finally{console.log("Finalizada la carga de datos del perfil")}},async deleteUser(e){try{await S(e),this.dataUser=this.dataUser.filter(a=>a.dni!==e)}catch(a){console.log(a.message)}finally{console.log("Finalizado")}}}});export{C as u};
